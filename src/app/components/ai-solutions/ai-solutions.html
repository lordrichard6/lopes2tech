<div class="ai-solutions-container">
  <div class="ai-solutions-hero">
    <app-ai-solutions-hero-animation class="hero-animation"></app-ai-solutions-hero-animation>
    <div class="hero-content">
      <h1>{{ 'aiSolutions.hero.title' | translate }}</h1>
      <p class="hero-subtitle">
        {{ 'aiSolutions.hero.subtitle' | translate }}
      </p>

      <button
        type="button"
        class="hero-scroll"
        (click)="scrollToServices()"
        [attr.aria-label]="'aiSolutions.hero.scroll' | translate">
<!--         <span class="scroll-text">
          {{ 'aiSolutions.hero.scroll' | translate }}
        </span> -->
        <span class="scroll-icon" aria-hidden="true"></span>
      </button>
    </div>
  </div>

  <div class="ai-solutions-content">
    <div class="ai-content-orbit" aria-hidden="true">
      <div class="orbit-track orbit-track--one">
        <div class="orbit-node orbit-node--primary"></div>
      </div>
      <div class="orbit-track orbit-track--two">
        <div class="orbit-node orbit-node--secondary"></div>
      </div>
      <div class="orbit-track orbit-track--three">
        <div class="orbit-node orbit-node--tertiary"></div>
      </div>
      <div class="orbit-glow orbit-glow--one"></div>
      <div class="orbit-glow orbit-glow--two"></div>
      <div class="floating-chip floating-chip--left"></div>
      <div class="floating-chip floating-chip--right"></div>
    </div>
    <div class="container">
      <div class="industry-filter">
        <span class="filter-label">{{ 'aiSolutions.filter.label' | translate }}</span>
        <div class="industry-buttons">
        <button
            type="button"
            class="industry-button"
            *ngFor="let industry of industries"
            (click)="selectIndustry(industry)"
            [class.active]="industry.value === selectedIndustry">
          {{ getIndustryLabel(industry) }}
          </button>
        </div>
      </div>

      <div class="section-header">
        <h2>{{ 'aiSolutions.sectionTitle' | translate }}</h2>
      </div>

      <div
        class="services-grid"
        id="ai-services"
        [@industrySwitch]="selectedIndustry">
        <div class="service-card" *ngFor="let service of services">
          <div class="service-number">{{ service.id }}</div>
          <h3 class="service-title">{{ getServiceTitle(service) }}</h3>
          
          <div class="service-section">
            <h4 class="section-label">{{ 'aiSolutions.labels.problem' | translate }}</h4>
            <p class="service-problem">{{ getServiceProblem(service) }}</p>
          </div>

          <div class="service-section">
            <h4 class="section-label">{{ 'aiSolutions.labels.solution' | translate }}</h4>
            <p class="service-solution">{{ getServiceSolution(service) }}</p>
          </div>

        </div>
      </div>

      <!-- <p class="services-note">
        {{ 'aiSolutions.services.note' | translate }}
      </p> -->

      <div class="packages-section">
        <div class="section-header">
          <h2>{{ 'aiSolutions.packages.title' | translate }}</h2>
        </div>

      <div class="packages-grid">
        <div
          class="package-card"
          *ngFor="let pkg of packages"
          [class.care-plan-card]="pkg.translationKey === 'carePlan'"
          [class.trio-card]="pkg.translationKey === 'trio'"
          [attr.role]="pkg.hasDialog ? 'button' : null"
          [attr.tabindex]="pkg.hasDialog ? 0 : null"
          (click)="pkg.hasDialog && openPackageDialog(pkg)"
          (keydown.enter)="pkg.hasDialog && openPackageDialog(pkg)"
        >
          <h3 class="package-name">
            {{ ('aiSolutions.packages.cards.' + pkg.translationKey + '.title') | translate }}
          </h3>
          <div class="package-price">
            {{ ('aiSolutions.packages.cards.' + pkg.translationKey + '.price') | translate }}
          </div>
          <p class="package-description">
            {{ ('aiSolutions.packages.cards.' + pkg.translationKey + '.description') | translate }}
          </p>
        </div>
      </div>

      <app-meeting-section
        id="ai-meeting-form"
        [context]="'AI Solutions Page'"
        [title]="'aiSolutions.meeting.title' | translate"
        [description]="'aiSolutions.meeting.description' | translate"
        [successTitle]="'aiSolutions.meeting.successTitle' | translate"
        [successDescription]="'aiSolutions.meeting.successDescription' | translate">
      </app-meeting-section>
    </div>
  </div>

  @if (isPackageDialogOpen) {
    <div
      class="package-dialog-backdrop"
      (click)="closePackageDialog()"
      tabindex="-1"
    >
      <div
        class="package-dialog"
        role="dialog"
        aria-modal="true"
        (click)="$event.stopPropagation()"
      >
        <button
          type="button"
          class="package-dialog-close"
          (click)="closePackageDialog()"
          aria-label="Close dialog"
        >
          Ã—
        </button>
        <h3 class="package-dialog-title">
          @if (selectedPackage) {
            {{ ('aiSolutions.packages.cards.' + selectedPackage.translationKey + '.title') | translate }}
          }
        </h3>

        @if (selectedPackage?.translationKey === 'carePlan') {
          <div class="care-plan-grid">
            <div
              class="care-plan-tier"
              *ngFor="let option of carePlanOptions"
            >
              <div class="care-plan-tier-header">
                <span class="care-plan-tier-label">
                  {{
                    ('aiSolutions.packages.carePlan.tiers.'
                      + option.translationKey
                      + '.title') | translate
                  }}
                </span>
                <span class="care-plan-tier-price">
                  {{
                    ('aiSolutions.packages.carePlan.tiers.'
                      + option.translationKey
                      + '.price') | translate
                  }}
                </span>
              </div>
              <p class="care-plan-tier-description">
                {{
                  ('aiSolutions.packages.carePlan.tiers.'
                    + option.translationKey
                    + '.description') | translate
                }}
              </p>
            </div>
          </div>
        } @else {
          <p class="package-dialog-body">Hello world</p>
        }
      </div>
    </div>
  }
</div>

